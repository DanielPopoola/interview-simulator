{% extends "base.html" %}

{% block title %}Home - AI Interview Simulator{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Hero Section -->
    <div class="text-center mb-5">
        <h1 style="margin-bottom: 1rem;">ðŸŽ¯ AI Interview Simulator</h1>
        <p style="font-size: 1.25rem; color: var(--gray-600); max-width: 600px; margin: 0 auto;">
            Practice interviews with AI-powered feedback. Improve your performance and optimize your CV for your dream job.
        </p>
    </div>

    <!-- Recent Sessions Section -->
    {% if recent_sessions %}
    <div class="card" style="background: linear-gradient(135deg, #dbeafe 0%, #e0e7ff 100%); border: none;">
        <h2 style="margin-bottom: 1.5rem;">ðŸ“‹ Resume Your Sessions</h2>
        
        {% for session in recent_sessions %}
        <div class="card" style="margin-bottom: 1rem; display: flex; justify-content: space-between; align-items: center;">
            <div>
                <h3 style="margin-bottom: 0.5rem; font-size: 1.25rem;">{{ session.job_title }}</h3>
                <p style="color: var(--gray-600); margin-bottom: 0.25rem;">{{ session.company_name }}</p>
                <p style="color: var(--gray-400); font-size: 0.875rem; margin: 0;">
                    Started {{ session.created_at.strftime('%B %d, %I:%M %p') }}
                </p>
            </div>
            
            <div>
                {% if session.feedback %}
                    <!-- Session completed -->
                    <a href="{{ url_for('feedback.feedback_page', session_id=session.id) }}" 
                       class="btn btn-success">
                        View Results
                    </a>
                {% elif session.messages|length > 0 %}
                    <!-- Interview in progress -->
                    <a href="{{ url_for('interview.interview_page', session_id=session.id) }}" 
                       class="btn btn-primary">
                        Continue Interview
                    </a>
                {% elif session.cv_text or session.job_description_text %}
                    <!-- Partial upload -->
                    <a href="{{ url_for('document.upload_page', session_id=session.id) }}" 
                       class="btn btn-warning">
                        Complete Upload
                    </a>
                {% else %}
                    <!-- Just created, nothing done -->
                    <a href="{{ url_for('document.upload_page', session_id=session.id) }}" 
                       class="btn" style="background: var(--gray-600); color: white;">
                        Start Upload
                    </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Create New Session Card -->
    <div class="card">
        <div class="card-header">
            <h2>Start Your Interview Prep</h2>
            <p style="color: var(--gray-600); margin: 0;">
                Create a new interview session to begin practicing
            </p>
        </div>
        
        <form action="{{ url_for('session.create_session') }}" method="POST">
            <div class="form-group">
                <label for="job_title">Job Title</label>
                <input type="text" 
                       id="job_title"
                       name="job_title" 
                       required
                       placeholder="e.g., Senior Python Developer">
            </div>
            
            <div class="form-group">
                <label for="company_name">Company Name</label>
                <input type="text" 
                       id="company_name"
                       name="company_name" 
                       required
                       placeholder="e.g., Google">
            </div>
            
            <button type="submit" class="btn btn-primary btn-lg btn-block">
                Create Interview Session â†’
            </button>
        </form>
    </div>

    <!-- Feature Cards -->
    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-top: 2rem;">
        <div class="card" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ðŸ“„</div>
            <h3 style="font-size: 1.25rem;">Upload Your CV</h3>
            <p style="color: var(--gray-600); margin: 0;">
                Support for PDF, DOCX, and TXT formats
            </p>
        </div>
        
        <div class="card" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ðŸ¤–</div>
            <h3 style="font-size: 1.25rem;">AI Interview</h3>
            <p style="color: var(--gray-600); margin: 0;">
                Practice with adaptive AI questions
            </p>
        </div>
        
        <div class="card" style="text-align: center;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">ðŸ’¡</div>
            <h3 style="font-size: 1.25rem;">Get Feedback</h3>
            <p style="color: var(--gray-600); margin: 0;">
                Detailed analysis and CV optimization tips
            </p>
        </div>
    </div>
</div>
{% endblock %}